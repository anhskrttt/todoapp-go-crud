# TodoApp Go CRUD

## Techstack
* Current: 
    * BE:
        * [Go](https://go.dev/)
        * [Gin](https://gin-gonic.com/): HTTP Web Framework
        * [Gorm](https://gorm.io/index.html): ORM (Object-relational mapping) library
        * [CompileDaemon](https://github.com/githubnemo/CompileDaemon): Watches your .go files in a directory and invokes ```go build``` if a file changed
    * FE (Simple): HTML/CSS

* Future tasks: 
    * FE: Reactjs

## Directory Layout
```bash
    .
    ├── controllers                 # Function Handlers
    │   └── controllers.go
    ├── docs                        # Related docs
    │   └── bugs.md                 
    ├── go.mod
    ├── go.sum
    ├── initializers                # Initial functions 
    │   ├── connectdb.go
    │   └── loadEnv.go
    ├── main.go                     # Main go file
    ├── migrations                  # Gorm database migrations
    │   └── migrations.go
    ├── models                      # Models for the database
    │   └── models.go
    ├── public                      # Public materials: CSS, Images, etc.
    │   └── style.css
    ├── README.md
    ├── routers                     # API Routes
    │   └── routers.go
    ├── templates                   # Static HTML templates
    │   └── index.html
    └── todoapp-go-crud             # Auto generated by CompileDaemon
```
## Setup
- Clone project
```
git clone https://github.com/anhskrttt/todoapp-go-crud.git
```
- Create .env file with proper content
```
cp .env.example .env
```
- Run backend
```
go mod tidy
CompileDaemon -command="./todoapp-go-crud"
```

## Routes
| Routes                | HTTP Methods  | Description                               |
| -------------         | ------------- | ----------------------------------------- |
| /api/tasks            | GET           | Get all tasks                             |
| /api/tasks/:id        | GET           | Get a task by id                          |
| /api/task             | POST          | Add a new task                            |
| /api/tasks/:id        | PUT           | Update a task: Title, Description, Status |
| /api/task/:id         | DELETE        | Delete a task by id                       |
| /api/tasks            | DELETE        | Delete all tasks                          |

## API Refs
### GetAllTasks
``` GET /api/tasks ```
```json
{
    "length": 4,
    "task": [
        {
            "id": 39,
            "createAt": "2022-08-25T20:30:50.213119-07:00",
            "updateAt": "2022-08-25T20:35:47.233124-07:00",
            "title": "Task 01",
            "description": "This is a task test",
            "status": false
        },
        {
            "id": 40,
            "createAt": "2022-08-26T02:21:29.6419-07:00",
            "updateAt": "2022-08-26T02:21:29.6419-07:00",
            "title": "Task 01",
            "description": "This is a task test",
            "status": false
        },
        {
            "id": 41,
            "createAt": "2022-08-26T02:26:18.472237-07:00",
            "updateAt": "2022-08-26T02:26:18.472237-07:00",
            "title": "",
            "description": "",
            "status": false
        },
        {
            "id": 42,
            "createAt": "2022-08-26T02:31:45.843598-07:00",
            "updateAt": "2022-08-26T02:31:45.843598-07:00",
            "title": "",
            "description": "",
            "status": false
        }
    ]
}
```

### GetTaskById
``` GET /api/tasks/:id ```
```json
{
    "response": {
        "id": 39,
        "createAt": "2022-08-25T20:30:50.213119-07:00",
        "updateAt": "2022-08-25T20:35:47.233124-07:00",
        "title": "Task 01",
        "description": "This is a task test",
        "status": false
    }
}
```

### CreateTask
``` POST /api/task ```

* Data
```json
{
    "title": "Task 01",
    "description": "This is a task test",
    "status": false
}
```

* Response
```json
{
    "response": {
        "id": 40,
        "createAt": "2022-08-26T02:21:29.64190037-07:00",
        "updateAt": "2022-08-26T02:21:29.64190037-07:00",
        "title": "Task 01",
        "description": "This is a task test",
        "status": false
    }
}

```

### UpdateTaskById
``` PUT /api/tasks/:id ```

* Data
```json
{
    "title": "Task 06 (Updated L2)",
    "description": "This is my 6th task",
    "status": true
}
```

* Response
```json
{
    "response": {
        "id": 39,
        "createAt": "2022-08-25T20:30:50.213119-07:00",
        "updateAt": "2022-08-26T03:13:03.359628912-07:00",
        "title": "Task 06 (Updated L2)",
        "description": "This is my 6th task",
        "status": true
    }
}
```

### DeleteTaskById
``` DELETE /api/tasks/:id ```

```json
{
    "response": "deleted"
}
```

## References
* Official docs: gin, gorm, CompileDaemon
* HTML/CSS: freecodecamp's API course
* Coding with Robby (Youtube): [Creating a JSON CRUD API in Go (Gin/GORM)](https://www.youtube.com/watch?v=lf_kiH_NPvM)

